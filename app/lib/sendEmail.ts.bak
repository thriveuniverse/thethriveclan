import { Resend } from 'resend';

const resend = new Resend(process.env.RESEND_API_KEY!);

export async function sendPurchaseEmail(to: string, productName: string, downloadLink?: string) {
  const htmlBody = `
    <div>
      <p>Thanks for buying <b>${productName}</b>. Your download is ready:</p>
      ${downloadLink ? `<p><a href="${downloadLink}">Download here</a></p>` : "<p>Check back soonâ€”link on its way!</p>"}
      <p>If you have questions, reply to this email.</p>
      <p>Best regards,<br/>The Thrive Clan Team</p>
    </div>
  `;
  console.log("HTML Being Sent:", htmlBody);
console.log("Download link (raw):", downloadLink);

  await resend.emails.send({
    from: 'downloads@thethriveclan.com',
    to: [to],
    subject: `Thanks for your purchase: ${productName}!`,
    html: htmlBody
  });

 
}